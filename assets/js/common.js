(function(factory){'use strict';if(typeof window!=='undefined'){if(typeof define==='function'&&define.amd){define(['jquery',window],factory);}else if(typeof exports==='object'){factory(require('jquery'),window);}else{factory(jQuery,window);}}else{throw new Error('Could not find DOM window object.');}})(function($,window,undefined){var Loading=function(element,options){this.element=element;this.settings=$.extend({},Loading.defaults,options);this.settings.fullPage=this.element.is('body');this.init();if(this.settings.start){this.start();}};Loading.defaults={overlay:undefined,zIndex:undefined,message:'Загрузка...',theme:'light',shownClass:'loading-shown',hiddenClass:'loading-hidden',stoppable:false,start:true,onStart:function(loading){loading.overlay.fadeIn(150);},onStop:function(loading){loading.overlay.fadeOut(150);},onClick:function(){}};Loading.setDefaults=function(options){Loading.defaults=$.extend({},Loading.defaults,options);};$.extend(Loading.prototype,{init:function(){this.isActive=false;this.overlay=this.settings.overlay||this.createOverlay();this.resize();this.attachMethodsToExternalEvents();this.attachOptionsHandlers();},createOverlay:function(){var overlay=$('<div class="loading-overlay loading-theme-'+this.settings.theme+'"><div class="loading-overlay-content">'+this.settings.message+'</div></div>').addClass(this.settings.hiddenClass).hide().appendTo('body');var elementID=this.element.attr('id');if(elementID){overlay.attr('id',elementID+'_loading-overlay');}
return overlay;},attachMethodsToExternalEvents:function(){var self=this;self.element.on('loading.start',function(){self.overlay.removeClass(self.settings.hiddenClass).addClass(self.settings.shownClass);});self.element.on('loading.stop',function(){self.overlay.removeClass(self.settings.shownClass).addClass(self.settings.hiddenClass);});if(self.settings.stoppable){self.overlay.on('click',function(){self.stop();});}
self.overlay.on('click',function(){self.element.trigger('loading.click',self);});$(window).on('resize',function(){self.resize();});$(function(){self.resize();});},attachOptionsHandlers:function(){var self=this;self.element.on('loading.start',function(event,loading){self.settings.onStart(loading);});self.element.on('loading.stop',function(event,loading){self.settings.onStop(loading);});self.element.on('loading.click',function(event,loading){self.settings.onClick(loading);});},calcZIndex:function(){if(this.settings.zIndex!==undefined){return this.settings.zIndex;}else{return(parseInt(this.element.css('z-index'))||0)+1+this.settings.fullPage;}},resize:function(){var self=this;var element=self.element,totalWidth=element.outerWidth(),totalHeight=element.outerHeight();if(this.settings.fullPage){totalHeight='100%';totalWidth='100%';}
this.overlay.css({position:self.settings.fullPage?'fixed':'absolute',zIndex:self.calcZIndex(),top:element.offset().top,left:element.offset().left,width:totalWidth,height:totalHeight});},start:function(){this.isActive=true;this.resize();this.element.trigger('loading.start',this);},stop:function(){this.isActive=false;this.element.trigger('loading.stop',this);},active:function(){return this.isActive;},toggle:function(){if(this.active()){this.stop();}else{this.start();}},destroy:function(){this.overlay.remove();}});var dataAttr='jquery-loading';$.fn.loading=function(options){return this.each(function(){var loading=$.data(this,dataAttr);if(!loading){if(options===undefined||typeof options==='object'||options==='start'||options==='toggle'){$.data(this,dataAttr,new Loading($(this),options));}}else{if(options===undefined){loading.start();}else if(typeof options==='string'){loading[options].apply(loading);}else{loading.destroy();$.data(this,dataAttr,new Loading($(this),options));}}});};$.fn.Loading=function(options){var loading=$(this).data(dataAttr);if(!loading||options!==undefined){$(this).data(dataAttr,(loading=new Loading($(this),options)));}
return loading;};$.expr[':'].loading=function(element){var loadingObj=$.data(element,dataAttr);if(!loadingObj){return false;}
return loadingObj.active();};$.Loading=Loading;});$(document).on("click","a[href='']",function(event){event.preventDefault();})
let load_stop=setTimeout(()=>{readyPage();},5000);function readyPage(jQuery){clearTimeout(load_stop);Cart.init();$("#page_loader").fadeOut("slow");$('img').on('dragstart',function(event){event.preventDefault();});$(document).trigger("pageLoad");}
$(window).on('load',readyPage);(function(){window.inputNumber=function(el,callback=()=>{}){var min=el.attr('min')||false;var max=el.attr('max')||false;var els={};els.dec=el.prev();els.inc=el.next();el.each(function(){init($(this));});el.on("change input paste blur",function(){if($(this).val()>10)$(this).val(10);if($(this).val()<1)$(this).val(1);if(isNaN(parseInt($(this).val())))$(this).val(1);$(this).val(parseInt($(this).val()));})
function init(el){els.dec.on('click',decrement);els.inc.on('click',increment);function decrement(){var value=el[0].value;value--;if(!min||value>=min){el[0].value=value;}
callback.call(el);}
function increment(){var value=el[0].value;value++;if(!max||value<=max){el[0].value=value++;}
callback.call(el);}}}})();var boxes_count=0;class MessageBox{constructor(o={}){this.title=o.title||"";this.width=o.width+"px"||"500px";this.buttons=[];this.html=""}
show(callback=()=>{}){boxes_count++;var box=document.createElement("div");box.className="modal fade";box.id="box_"+boxes_count;box.innerHTML="  <div class=\"modal-dialog modal-dialog-centered\" style=\"max-width:"+this.width+"\" role=\"document\">\n"+
"    <div class=\"modal-content\">\n"+
"      <div class=\"modal-header\">\n"+
"        <h5 class=\"modal-title font-weight-bold\" id=\"boxLabel_"+boxes_count+"\">"+this.title+"</h5>\n"+
"        <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n"+
"          <span aria-hidden=\"true\">&times;</span>\n"+
"        </button>\n"+
"      </div>\n"+
"      <div class=\"modal-body\">\n"+
this.html+
"\n</div>\n"+
"      <div class=\"modal-footer\">\n"+
"      </div>\n"+
"    </div>\n"+
"  </div>\n";$(box).attr("tabindex","-1");$(box).attr("role","dialog");$(box).attr("aria-labelledby","boxLabel_"+boxes_count);$(box).attr("aria-hidden","true");this.box=box;if($("#box_"+(boxes_count-1)))$("#box_"+(boxes_count-1)).after(this.box);else $(document.body).prepend(this.box);var box_footer=$(this.box).find(".modal-footer");this.buttons.forEach(function(btn){box_footer.append(btn);});$(this.box).on('hidden.bs.modal',function(e){if(boxes_count>0)boxes_count--;console.log(boxes_count);if(boxes_count<1)$('html').css({overflow:'initial',height:'initial'});else $('html').css({overflow:'hidden',height:'initial'});$(e.target).remove();});$('html').css({overflow:'hidden',height:'initial'});$(this.box).modal("show");setTimeout(callback,160);}
close(){$(this.box).modal("hide");}
content(html){this.html=html;}
addButton(text,onclick=function(){},type="s"){var btn=document.createElement("button");$(btn).attr("type","button");$(btn).addClass("btn btn-round");if(type=="s")$(btn).addClass("btn-success");else if(type=="no"){$(btn).addClass("btn-danger");$(btn).attr("data-dismiss","modal");}else type="primary";$(btn).click(onclick);$(btn).text(text);this.buttons.unshift(btn);}}
function parseResponse(data){try{data=JSON.parse(data);}catch(e){return;}
if(data.alert===1)
switch(data.type){case "success":showNotify(1,data.text);break;case "error":showNotify(2,data.text);break;}
r={};r.text=data.text;r.html=data.html;if(data.js!=="")eval(data.js);switch(data.type){case "success":r.status=1;break;case "error":r.status=2;break;default:r.status=2;}
return r;}
function showNotify(type,msg,duration=1000){types=["success","error","warn","info"];type=types[type-1]||types[1];return $("body").overhang({type:type,message:msg,duration:duration/1000});}
var ajax={post:function(url,params,actions={}){ajax.send(url,params,actions);},get:function(url,params,actions={}){ajax.send(url,params,actions,"GET");},send:function(url,params,actions,type="POST"){actions.onError=actions.onError||function(){};actions.onDone=actions.onDone||function(){};actions.onFail=actions.onFail||function(){};$.ajax({url:url,dataType:'json',data:params,type:type}).done(function(data){data=parseResponse(data);switch(data.status){case 1:actions.onDone(data.html,data.text);break;case 2:actions.onError(data.html,data.text);break;}}).fail(function(xhr,status,error){actions.onFail(xhr,status,error);});}}
function parseResponse(data){if(data.alert===1)
switch(data.type){case "success":showNotify(1,data.text);break;case "error":showNotify(2,data.text);break;}
r={};r.text=data.text;r.html=data.html;if(data.js!=="")eval(data.js);switch(data.type){case "success":r.status=1;break;case "error":r.status=2;break;default:r.status=2;}
return r;}
function startLoading(){$('html').css({overflow:'hidden',height:'100%'});$('body').loading();}
function stopLoading(){$('html').css({overflow:'auto',height:'auto'});$('body').loading("stop");}
function validateEmail(email){const re=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return re.test(String(email).toLowerCase());}
function redirect(url){window.location=url;}
function findGetParameter(parameterName){var result=null,tmp=[];location.search.substr(1).split("&").forEach(function(item){tmp=item.split("=");if(tmp[0]===parameterName)result=decodeURIComponent(tmp[1]);});return result;}